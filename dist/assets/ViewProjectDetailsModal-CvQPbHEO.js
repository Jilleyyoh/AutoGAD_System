import{r as i,a as N,j as e}from"./app-DZrL6wO1.js";import{c as t,t as s}from"./theme-classes-C1o5LvBg.js";import{X as g,C as f}from"./x-FRcdCJN5.js";import{L as y}from"./loader-BlIxAh7e.js";import{F as p}from"./file-text-BtWhND71.js";import{E as k}from"./eye-DK73xOfc.js";import{c as w}from"./createLucideIcon-DkMGSA4v.js";import{D as _}from"./download-mUmP9tzt.js";import"./app-CSLFruQT.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],S=w("ExternalLink",E),D=[{id:"info",label:"Project Info",icon:f},{id:"documents",label:"Documents",icon:p},{id:"result",label:"Evaluation Result",icon:k}];function z({isOpen:n,projectId:d,onClose:h}){const[r,u]=i.useState(null),[j,o]=i.useState(!1),[c,m]=i.useState(null),[l,x]=i.useState("info");i.useEffect(()=>{n&&d&&(x("info"),b())},[n,d]);const b=async()=>{o(!0),m(null);try{const a=await N.get(`/admin1/assignments/project/${d}`);u(a.data)}catch(a){console.error("Error fetching project details:",a),m(a.response?.data?.message||"Failed to load project details")}finally{o(!1)}};return n?e.jsx("div",{className:"fixed inset-0 bg-black/30 dark:bg-black/40 backdrop-blur-sm z-50 overflow-y-auto flex items-center justify-center p-4",children:e.jsx("div",{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:t("rounded-lg shadow-2xl border",s.card.base,"border-gray-200 dark:border-slate-700"),children:[e.jsxs("div",{className:t("sticky top-0 p-6 flex items-center justify-between border-b","bg-gradient-to-r from-blue-600 to-blue-700 text-white",s.table.border),children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Project Details"}),e.jsx("p",{className:"text-blue-100 text-sm mt-1",children:"View complete project information"})]}),e.jsx("button",{onClick:h,className:"p-2 hover:bg-blue-800 rounded-lg transition-colors",children:e.jsx(g,{className:"w-6 h-6"})})]}),j?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(y,{className:"w-8 h-8 animate-spin text-blue-600"})}):c?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:t("border px-4 py-3 rounded",s.alert.error),children:c})}):r?e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:t("mb-6 border-b",s.border.primary),children:e.jsx("div",{className:"flex space-x-8",children:D.map(a=>e.jsx("button",{onClick:()=>x(a.id),className:`py-3 px-1 border-b-2 font-medium text-sm transition-colors ${l===a.id?"border-blue-500 text-blue-600 dark:text-blue-400":t("border-transparent",s.text.tertiary,"hover:text-gray-700 dark:hover:text-gray-300")}`,children:a.label},a.id))})}),l==="info"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:t("text-sm font-medium",s.text.tertiary),children:"Project Code"}),e.jsx("p",{className:t("mt-1 font-mono",s.text.primary),children:r.project_code})]}),e.jsxs("div",{children:[e.jsx("p",{className:t("text-sm font-medium",s.text.tertiary),children:"Status"}),e.jsx("span",{className:t("inline-flex items-center px-3 py-1 mt-1 rounded-full text-sm font-medium",s.badge.blue),children:r.project_status.name})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:t("text-sm font-medium",s.text.tertiary),children:"Title"}),e.jsx("p",{className:t("mt-1 font-semibold",s.text.primary),children:r.project_title})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:t("text-sm font-medium",s.text.tertiary),children:"Organization"}),e.jsx("p",{className:t("mt-1",s.text.primary),children:r.proponent.organization})]}),e.jsxs("div",{children:[e.jsx("p",{className:t("text-sm font-medium",s.text.tertiary),children:"Proponent"}),e.jsx("p",{className:t("mt-1",s.text.primary),children:r.proponent.name})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:t("text-sm font-medium",s.text.tertiary),children:"Domain"}),e.jsx("p",{className:t("mt-1",s.text.primary),children:r.domain_expertise.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:t("text-sm font-medium",s.text.tertiary),children:"Phase"}),e.jsx("p",{className:t("mt-1",s.text.primary),children:r.implementation_phase.name})]})]}),r.rationale&&e.jsxs("div",{children:[e.jsx("p",{className:t("text-sm font-medium",s.text.tertiary),children:"Rationale"}),e.jsx("p",{className:t("mt-1 whitespace-pre-wrap",s.text.secondary),children:r.rationale})]}),r.objectives&&e.jsxs("div",{children:[e.jsx("p",{className:t("text-sm font-medium",s.text.tertiary),children:"Objectives"}),e.jsx("p",{className:t("mt-1 whitespace-pre-wrap",s.text.secondary),children:r.objectives})]}),r.project_description&&e.jsxs("div",{children:[e.jsx("p",{className:t("text-sm font-medium",s.text.tertiary),children:"Description"}),e.jsx("p",{className:t("mt-1 whitespace-pre-wrap",s.text.secondary),children:r.project_description})]}),r.current_evaluator&&e.jsxs("div",{className:t("border rounded-lg p-4 mt-4",s.badge.green),children:[e.jsx("p",{className:t("text-sm font-medium",s.text.tertiary),children:"Assigned Evaluator"}),e.jsx("p",{className:t("mt-1 font-semibold",s.text.primary),children:r.current_evaluator.name}),e.jsx("p",{className:t("text-sm",s.text.secondary),children:r.current_evaluator.email})]})]}),l==="documents"&&e.jsx("div",{className:"space-y-4",children:r.documents.length>0?e.jsx("div",{className:"space-y-3",children:r.documents.map(a=>e.jsxs("div",{className:t("flex items-start gap-3 p-4 border rounded-lg",s.table.row,"hover:bg-gray-50 dark:hover:bg-slate-700"),children:[e.jsx(p,{className:t("w-5 h-5 flex-shrink-0 mt-1",s.icon.primary)}),e.jsxs("div",{className:"flex-grow min-w-0",children:[e.jsx("p",{className:t("font-semibold truncate",s.text.primary),children:a.file_name}),e.jsx("p",{className:t("text-sm",s.text.tertiary),children:a.document_type}),a.description&&e.jsx("p",{className:t("text-sm mt-1",s.text.tertiary),children:a.description}),e.jsxs("p",{className:t("text-xs mt-1",s.text.muted),children:["Uploaded: ",new Date(a.upload_date).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[a.drive_link&&e.jsx("a",{href:a.drive_link,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-900/20 rounded-lg transition-colors",children:e.jsx(S,{className:"w-5 h-5"})}),a.file_path&&e.jsx("a",{href:`/admin1/assignments/download/${a.id}`,className:"p-2 text-green-600 dark:text-green-400 hover:bg-green-100 dark:hover:bg-green-900/20 rounded-lg transition-colors",children:e.jsx(_,{className:"w-5 h-5"})})]})]},a.id))}):e.jsx("p",{className:t("text-center py-8",s.text.tertiary),children:"No documents uploaded"})}),l==="result"&&e.jsx("div",{className:"space-y-6",children:r.project_status.name==="for_evaluation"&&!r.evaluation?e.jsx("div",{className:t("border rounded-lg p-6 text-center","bg-amber-50 dark:bg-amber-900/30 border-amber-200 dark:border-amber-800"),children:e.jsx("p",{className:t("font-semibold","text-amber-900 dark:text-amber-100"),children:r.revision_count&&r.revision_count>0?"Evaluator is about to re-evaluate. No evaluations yet.":"No evaluations yet."})}):r.evaluation?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:t("border rounded-lg p-6",s.border.primary,"bg-blue-50 dark:bg-blue-900/30"),children:[e.jsx("p",{className:t("text-sm font-medium mb-2",s.text.tertiary),children:"Total Score"}),e.jsxs("div",{className:"flex items-baseline gap-4",children:[e.jsx("p",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:r.total_score!==null&&r.total_score!==void 0?parseFloat(String(r.total_score)).toFixed(2):"N/A"}),r.evaluation.interpretation&&e.jsxs("div",{children:[e.jsx("p",{className:t("font-semibold text-lg",s.text.primary),children:r.evaluation.interpretation.interpretation}),e.jsx("p",{className:t("text-sm mt-1",s.text.secondary),children:r.evaluation.interpretation.description})]})]})]}),r.interpretations&&r.interpretations.length>0&&e.jsxs("div",{className:t("border rounded-lg p-6",s.border.primary),children:[e.jsx("p",{className:t("text-sm font-medium mb-4",s.text.tertiary),children:"Scoring Reference"}),e.jsx("div",{className:"space-y-3",children:r.interpretations.map((a,v)=>e.jsxs("div",{className:t("flex justify-between p-3 rounded","bg-gray-50 dark:bg-slate-700/50"),children:[e.jsxs("div",{children:[e.jsx("p",{className:t("font-medium",s.text.primary),children:a.interpretation}),e.jsx("p",{className:t("text-sm",s.text.secondary),children:a.description})]}),e.jsxs("p",{className:t("font-mono text-sm font-semibold",s.text.tertiary),children:[a.min," - ",a.max]})]},v))})]}),e.jsxs("div",{className:t("border rounded-lg p-6",s.border.primary),children:[e.jsx("p",{className:t("text-sm font-medium mb-3",s.text.tertiary),children:"Final Remarks"}),e.jsx("div",{className:t("p-4 rounded-lg","bg-gray-50 dark:bg-slate-700/50"),children:r.evaluation.final_remarks?e.jsx("p",{className:t("whitespace-pre-wrap",s.text.primary),children:r.evaluation.final_remarks}):e.jsx("p",{className:t("italic",s.text.tertiary),children:"No remarks provided"})})]}),r.evaluation.is_completed&&e.jsxs("div",{className:t("border rounded-lg p-6","bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-800"),children:[e.jsx("p",{className:t("font-semibold","text-green-900 dark:text-green-100"),children:"âœ“ Evaluation Submitted"}),r.evaluation.completion_date&&e.jsxs("p",{className:t("text-sm mt-2","text-green-800 dark:text-green-100"),children:["Submitted: ",new Date(r.evaluation.completion_date).toLocaleString()]})]})]}):e.jsx("div",{className:t("border rounded-lg p-6 text-center","bg-gray-50 dark:bg-slate-700/50"),children:e.jsx("p",{className:s.text.tertiary,children:"No evaluation data available"})})})]}):null]})})}):null}export{z as default};
