import{u as x,r as p,j as e,H as h,L as u}from"./app-DZrL6wO1.js";import{A as f,s as l,M as o}from"./app-layout-BVNqvqA6.js";import{c as t,t as a}from"./theme-classes-C1o5LvBg.js";import{S as j}from"./search-DiRNiSRA.js";import{C as g}from"./circle-alert-A2Xx533H.js";import"./app-CSLFruQT.js";import"./utils-CNSwpjVw.js";import"./button-Cr4sDpjN.js";import"./index-hSTZO9jP.js";import"./index-D4D1kMjY.js";import"./index-CYBwx7kR.js";import"./x-FRcdCJN5.js";import"./createLucideIcon-DkMGSA4v.js";import"./index-BNxELNJL.js";function H(){const{conversations:m}=x().props,[i,c]=p.useState(""),n=m.data.filter(s=>s.subject?.toLowerCase().includes(i.toLowerCase())||s.proponent?.user?.name?.toLowerCase().includes(i.toLowerCase())),d=s=>s.messages.filter(r=>r.status_id===1).length;return e.jsxs(f,{breadcrumbs:[{title:"Dashboard",href:l("admin2.dashboard")},{title:"Messages",href:l("admin2.conversations.index")}],children:[e.jsx(h,{title:"Conversations"}),e.jsxs("div",{className:"max-w-5xl mx-auto py-6 px-4 sm:px-6 lg:px-8 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:t("text-3xl font-bold",a.text.primary),children:"Proponent Messages"}),e.jsx("p",{className:t("mt-1",a.text.secondary),children:"Manage conversations with proponents"})]}),e.jsxs("div",{className:t("relative",""),children:[e.jsx(j,{className:t("absolute left-3 top-3 w-5 h-5",a.text.tertiary)}),e.jsx("input",{type:"text",placeholder:"Search by subject or proponent name...",value:i,onChange:s=>c(s.target.value),className:t("w-full pl-10 pr-4 py-2 border rounded-lg",a.border.primary,a.text.primary)})]}),e.jsx("div",{className:t("space-y-3 border rounded-lg overflow-hidden",a.border.primary),children:n.length>0?n.map(s=>{const r=d(s);return e.jsx(u,{href:l("admin2.conversations.show",s.id),className:t("block p-4 border-b hover:bg-gray-50 dark:hover:bg-slate-800 transition-colors",a.border.primary),children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx(o,{className:t("w-5 h-5 mt-1",a.text.secondary)}),r>0&&e.jsx("span",{className:"absolute top-0 right-0 inline-flex items-center justify-center h-5 w-5 rounded-full text-xs font-bold text-white bg-red-600",children:r})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:t("font-medium truncate",a.text.primary),children:s.subject||"Untitled"}),r>0&&e.jsx(g,{className:"w-4 h-4 text-orange-500 flex-shrink-0"})]}),e.jsxs("p",{className:t("text-sm mb-1",a.text.secondary),children:["From: ",e.jsx("span",{className:"font-medium",children:s.proponent.user.name})]}),e.jsx("p",{className:t("text-sm truncate",a.text.secondary),children:s.messages[s.messages.length-1]?.message||"No messages"})]})]}),e.jsxs("div",{className:t("flex flex-col items-end gap-1 flex-shrink-0",a.text.tertiary),children:[e.jsx("time",{className:"text-sm whitespace-nowrap",children:new Date(s.created_at).toLocaleDateString()}),e.jsxs("span",{className:"text-xs",children:[s.messages.length," messages"]})]})]})},s.id)}):e.jsxs("div",{className:t("p-8 text-center",a.text.tertiary),children:[e.jsx(o,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg",children:"No conversations"})]})})]})]})}export{H as default};
