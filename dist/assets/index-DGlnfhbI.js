import{r as g,j as t,H as P,L as u}from"./app-DZrL6wO1.js";import{A as z,s as I}from"./app-layout-BVNqvqA6.js";import{c as s,t as a}from"./theme-classes-C1o5LvBg.js";import{S as T}from"./search-DiRNiSRA.js";import{C as U}from"./calendar-BO3DXBkc.js";import{F as c}from"./file-text-BtWhND71.js";import{E as k}from"./eye-DK73xOfc.js";import{C as j}from"./circle-check-BkHVpkJp.js";import{C}from"./clock-uWUX0Jnj.js";import{C as D}from"./circle-x-BTMzG0jO.js";import{C as V}from"./circle-alert-A2Xx533H.js";import"./app-CSLFruQT.js";import"./utils-CNSwpjVw.js";import"./button-Cr4sDpjN.js";import"./index-hSTZO9jP.js";import"./index-D4D1kMjY.js";import"./index-CYBwx7kR.js";import"./x-FRcdCJN5.js";import"./createLucideIcon-DkMGSA4v.js";import"./index-BNxELNJL.js";function de({projects:o,currentStatus:_="all",searchQuery:S="",error:h}){const p=typeof window<"u"?new URLSearchParams(window.location.search):new URLSearchParams,L=p.get("status")||_||"all",[n,$]=g.useState(L),[m,E]=g.useState(S),[l,y]=g.useState({from:p.get("from")??void 0,to:p.get("to")??void 0}),d=(()=>{const e=r=>(r||"").toString().toLowerCase();return{all:o.length,for_evaluation:o.filter(r=>e(r.status)==="for_evaluation"||r.status===3||r.status===6).length,revision:o.filter(r=>["revision","revised","revision"].includes(e(r.status))||r.status===2).length,approved:o.filter(r=>e(r.status)==="approved"||e(r.status)==="completed"||[1,8].includes(r.status)).length,declined:o.filter(r=>e(r.status)==="declined"||r.status===4).length,review:o.filter(r=>e(r.status)==="review"||r.status===7).length,for_certification:o.filter(r=>e(r.status)==="for_certification"||r.status===5).length,certified:o.filter(r=>e(r.status)==="certified"||r.status===6).length}})(),A=[{key:"all",label:"All",count:d.all},{key:"for_evaluation",label:"For Evaluation",count:d.for_evaluation},{key:"revision",label:"Revision",count:d.revision},{key:"approved",label:"Approved",count:d.approved},{key:"declined",label:"Declined",count:d.declined},{key:"review",label:"In Review",count:d.review},{key:"for_certification",label:"For Certification",count:d.for_certification},{key:"certified",label:"Certified",count:d.certified}],v=e=>{switch(e){case"for_evaluation":return{color:"blue",icon:C,bg:"bg-blue-50 dark:bg-blue-900/10",border:"border-blue-200 dark:border-blue-800"};case"revision":return{color:"yellow",icon:V,bg:"bg-yellow-50 dark:bg-yellow-900/10",border:"border-yellow-200 dark:border-yellow-800"};case"approved":return{color:"green",icon:j,bg:"bg-green-50 dark:bg-green-900/10",border:"border-green-200 dark:border-green-800"};case"declined":return{color:"red",icon:D,bg:"bg-red-50 dark:bg-red-900/10",border:"border-red-200 dark:border-red-800"};case"review":return{color:"orange",icon:k,bg:"bg-orange-50 dark:bg-orange-900/10",border:"border-orange-200 dark:border-orange-800"};case"for_certification":return{color:"indigo",icon:C,bg:"bg-indigo-50 dark:bg-indigo-900/10",border:"border-indigo-200 dark:border-indigo-800"};case"certified":return{color:"purple",icon:j,bg:"bg-purple-50 dark:bg-purple-900/10",border:"border-purple-200 dark:border-purple-800"};default:return{color:"gray",icon:k,bg:"bg-gray-50 dark:bg-gray-900/10",border:"border-gray-200 dark:border-gray-800"}}},F=e=>{if(n==="all")return e;const r=i=>(i||"").toString().toLowerCase();return n==="for_evaluation"?e.filter(i=>r(i.status)==="for_evaluation"||i.status===3||i.status===6):n==="revision"?e.filter(i=>["revision","revised","revision"].includes(r(i.status))||i.status===2):n==="approved"?e.filter(i=>r(i.status)==="approved"||r(i.status)==="completed"||[1,8].includes(i.status)):n==="declined"?e.filter(i=>r(i.status)==="declined"||i.status===4):n==="review"?e.filter(i=>r(i.status)==="review"||i.status===7):n==="for_certification"?e.filter(i=>r(i.status)==="for_certification"||i.status===5):n==="certified"?e.filter(i=>r(i.status)==="certified"||i.status===6):e},R=()=>{const e=new URLSearchParams;n&&n!=="all"&&e.set("status",n),l.from&&e.set("from",l.from),l.to&&e.set("to",l.to),window.location.href=I("evaluator.evaluations.index")+(e.toString()?"?"+e.toString():"")},w=F(m?o.filter(e=>e.project_code.toLowerCase().includes(m.toLowerCase())||e.title.toLowerCase().includes(m.toLowerCase())):o);return t.jsxs(z,{children:[t.jsx(P,{title:"Evaluations"}),t.jsx("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:t.jsxs("div",{className:s("px-4 py-6 sm:px-0",a.text.primary),children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h1",{className:s("text-4xl font-bold",a.text.primary),children:"Evaluations"}),t.jsx("p",{className:s("mt-2",a.text.secondary),children:"Projects assigned for evaluation"})]}),h&&t.jsx("div",{className:s("mb-4 p-4 border rounded",a.alert.error),children:h}),t.jsx("div",{className:"mb-6",children:t.jsxs("div",{className:"relative",children:[t.jsx(T,{className:s("absolute left-3 top-3 w-5 h-5",a.icon.muted)}),t.jsx("input",{type:"text",placeholder:"Search by project code or title...",value:m,onChange:e=>E(e.target.value),className:s("w-full pl-10 pr-4 py-2 rounded-lg",a.input.base,a.input.focus,a.input.placeholder)})]})}),t.jsx("div",{className:s("mb-6 rounded-lg border shadow-sm",a.card.base),children:t.jsx("div",{className:"flex flex-wrap justify-center gap-2 p-4 lg:gap-4 lg:p-6",children:A.map(e=>{const{color:r,icon:i,bg:f,border:b}=v(e.key),x=n===e.key;return t.jsxs("button",{onClick:()=>$(e.key),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-all duration-200 ${x?`${f} ${b} border-2 text-${r}-700 dark:text-${r}-300 shadow-md`:s("text-gray-600 hover:text-gray-900 border border-transparent",a.text.secondary,"dark:hover:text-gray-300")}`,children:[t.jsx(i,{className:"w-4 h-4"}),t.jsx("span",{children:e.label}),t.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold ${x?`${r==="blue"?"bg-blue-200 dark:bg-blue-800 text-blue-800 dark:text-blue-200":r==="green"?"bg-green-200 dark:bg-green-800 text-green-800 dark:text-green-200":r==="red"?"bg-red-200 dark:bg-red-800 text-red-800 dark:text-red-200":r==="purple"?"bg-purple-200 dark:bg-purple-800 text-purple-800 dark:text-purple-200":r==="amber"?"bg-amber-200 dark:bg-amber-800 text-amber-800 dark:text-amber-200":r==="indigo"?"bg-indigo-200 dark:bg-indigo-800 text-indigo-800 dark:text-indigo-200":"bg-gray-200 dark:bg-gray-800 text-gray-800 dark:text-gray-200"}`:s("bg-gray-100 text-gray-600","dark:bg-slate-700 dark:text-gray-400")}`,children:e.count})]},e.key)})})}),t.jsxs("div",{className:"mb-6 flex items-center space-x-4",children:[t.jsxs("div",{className:s("flex items-center space-x-2",a.text.secondary),children:[t.jsx(U,{className:s("w-5 h-5",a.icon.muted)}),t.jsx("input",{type:"date",value:l.from??"",onChange:e=>y({...l,from:e.target.value||void 0}),className:s("px-3 py-2 rounded-md",a.input.base,a.input.focus)}),t.jsx("span",{className:s("mx-2",a.text.secondary),children:"to"}),t.jsx("input",{type:"date",value:l.to??"",onChange:e=>y({...l,to:e.target.value||void 0}),className:s("px-3 py-2 rounded-md",a.input.base,a.input.focus)})]}),t.jsx("div",{children:t.jsx("button",{onClick:R,className:s("inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm",a.button.primary),children:"Apply Filters"})})]}),t.jsx("div",{className:s("shadow-md rounded-lg overflow-hidden",a.card.base),children:w.length>0?t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:s("min-w-full divide-y",a.table.border),children:[t.jsx("thead",{className:a.table.header,children:t.jsxs("tr",{children:[t.jsx("th",{className:s("px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",a.text.tertiary),children:"Project Code"}),t.jsx("th",{className:s("px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",a.text.tertiary),children:"Title"}),t.jsx("th",{className:s("px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",a.text.tertiary),children:"Organization"}),t.jsx("th",{className:s("px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",a.text.tertiary),children:"Domain"}),t.jsx("th",{className:s("px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",a.text.tertiary),children:"Phase"}),t.jsx("th",{className:s("px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",a.text.tertiary),children:"Submission Date"}),t.jsx("th",{className:s("px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",a.text.tertiary),children:"Status"}),t.jsx("th",{className:s("px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",a.text.tertiary),children:"Action"})]})}),t.jsx("tbody",{className:s("divide-y",a.table.body,a.table.border),children:w.map(e=>t.jsxs("tr",{className:a.table.row,children:[t.jsx("td",{className:s("px-6 py-4 whitespace-nowrap text-sm font-medium",a.text.primary),children:e.project_code}),t.jsx("td",{className:s("px-6 py-4 text-sm",a.text.secondary),children:t.jsx("div",{className:"max-w-xs truncate",title:e.title,children:e.title})}),t.jsx("td",{className:s("px-6 py-4 whitespace-nowrap text-sm",a.text.secondary),children:e.organization}),t.jsx("td",{className:s("px-6 py-4 whitespace-nowrap text-sm",a.text.secondary),children:e.domain}),t.jsx("td",{className:s("px-6 py-4 whitespace-nowrap text-sm",a.text.secondary),children:e.phase}),t.jsx("td",{className:s("px-6 py-4 whitespace-nowrap text-sm",a.text.secondary),children:e.submission_date}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(()=>{const r=String(e.status||"").toLowerCase(),{color:i,icon:f,bg:b,border:x}=v(r);return t.jsxs("span",{className:s("inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold",b,x,"border"),children:[t.jsx(f,{className:"w-3 h-3"}),r?r.split("_").map((N,K)=>N.charAt(0).toUpperCase()+N.slice(1)).join(" "):"Unknown"]})})()}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(()=>{const r=e.status==="certified"?"completed":String(e.status||"").toLowerCase();if(r==="declined"||e.status_id===4)return t.jsxs(u,{href:`/evaluator/evaluations/${e.id}`,className:s("inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm",a.button.secondary),children:[t.jsx(c,{className:"w-4 h-4 mr-2"}),"View"]});if(r==="for_certification"||e.status_id===5)return t.jsxs(u,{href:`/evaluator/evaluations/${e.id}`,className:s("inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm",a.button.secondary),children:[t.jsx(c,{className:"w-4 h-4 mr-2"}),"View"]});if(["approved","completed"].includes(r)||[3,7].includes(e.status_id))return t.jsxs(u,{href:`/evaluator/evaluations/${e.id}`,className:s("inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm",a.button.secondary),children:[t.jsx(c,{className:"w-4 h-4 mr-2"}),"View"]});if(["revision","revised","revision"].includes(r)||e.status_id===2){const i=r==="revised"||String(e.status||"").toLowerCase()==="revised";return t.jsxs("button",{onClick:()=>{i&&(window.location.href=`/evaluator/evaluations/${e.id}`)},disabled:!i,className:s(`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm ${i?"":"opacity-50 cursor-not-allowed"}`,i?a.button.primary:a.button.secondary),children:[t.jsx(c,{className:"w-4 h-4 mr-2"}),"Re-Evaluate"]})}if(e.evaluation&&e.evaluation.has_progress){const i=e.revision_count&&e.revision_count>0;return t.jsxs(u,{href:`/evaluator/evaluations/${e.id}`,className:s("inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white",a.button.primary),children:[t.jsx(c,{className:"w-4 h-4 mr-2"}),i?"Re-Evaluate":"Continue Evaluation"]})}return t.jsxs(u,{href:`/evaluator/evaluations/${e.id}`,className:s("inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white",a.button.primary),children:[t.jsx(c,{className:"w-4 h-4 mr-2"}),"Evaluate"]})})()})]},e.id))})]})}):t.jsx("div",{className:s("px-6 py-12 text-center",a.text.tertiary),children:t.jsx("p",{className:"text-lg",children:"No projects found"})})})]})})]})}export{de as default};
