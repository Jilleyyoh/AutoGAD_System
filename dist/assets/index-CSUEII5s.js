import{r as c,j as e,H as p,L as u}from"./app-DZrL6wO1.js";import{A as g}from"./app-layout-BVNqvqA6.js";import{A as o,V as j}from"./version-info-pquDlwvR.js";import{c as s,t}from"./theme-classes-C1o5LvBg.js";import{C as b}from"./chevron-left-DLBjlG0X.js";import{c as N}from"./createLucideIcon-DkMGSA4v.js";import{E as f}from"./eye-DK73xOfc.js";import"./app-CSLFruQT.js";import"./utils-CNSwpjVw.js";import"./button-Cr4sDpjN.js";import"./index-hSTZO9jP.js";import"./index-D4D1kMjY.js";import"./index-CYBwx7kR.js";import"./x-FRcdCJN5.js";import"./index-BNxELNJL.js";import"./clock-uWUX0Jnj.js";import"./circle-alert-A2Xx533H.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],v=N("EllipsisVertical",y);function z({versions:i}){const[m,x]=c.useState(null),[n,l]=c.useState(null),r=i.find(a=>a.is_active),h=[...i].sort((a,d)=>new Date(d.created_at).getTime()-new Date(a.created_at).getTime());return e.jsxs(g,{children:[e.jsx(p,{title:"Questionnaire Version History"}),e.jsx("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:e.jsxs("div",{className:s("px-4 py-6 sm:px-0",t.text.primary),children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx(u,{href:"/admin2/settings",className:s("p-2 rounded-lg transition-colors","hover:bg-gray-100 dark:hover:bg-slate-700"),children:e.jsx(b,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:s("text-3xl font-bold",t.text.primary),children:"Questionnaire Version History"}),e.jsx("p",{className:s("mt-1",t.text.secondary),children:"View all versions and changes to your questionnaire"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[e.jsxs("div",{className:s("rounded-lg shadow p-6",t.card.base),children:[e.jsx("p",{className:s("text-sm font-medium",t.text.tertiary),children:"Total Versions"}),e.jsx("p",{className:s("text-3xl font-bold mt-2",t.text.primary),children:i.length})]}),e.jsxs("div",{className:s("rounded-lg shadow p-6",t.card.base),children:[e.jsx("p",{className:s("text-sm font-medium",t.text.tertiary),children:"Active Version"}),e.jsxs("p",{className:s("text-3xl font-bold mt-2 text-green-600 dark:text-green-400"),children:["v",r?.version_number||"N/A"]})]}),e.jsxs("div",{className:s("rounded-lg shadow p-6",t.card.base),children:[e.jsx("p",{className:s("text-sm font-medium",t.text.tertiary),children:"Active Version Uses"}),e.jsx("p",{className:s("text-3xl font-bold mt-2 text-blue-600 dark:text-blue-400"),children:r?.evaluation_count||0})]}),e.jsxs("div",{className:s("rounded-lg shadow p-6",t.card.base),children:[e.jsx("p",{className:s("text-sm font-medium",t.text.tertiary),children:"Total Questions"}),e.jsx("p",{className:s("text-3xl font-bold mt-2",t.text.primary),children:r?.snapshot.questions?.length||r?.snapshot.question_count||0})]})]}),e.jsxs("div",{className:s("rounded-lg shadow overflow-hidden",t.card.base),children:[e.jsx("div",{className:s("px-6 py-4 border-b font-semibold",t.table.header),children:"Version Timeline"}),e.jsx("div",{className:s("divide-y",t.table.border),children:h.map((a,d)=>e.jsxs("div",{className:s("p-6 transition-colors",d===0?"bg-blue-50 dark:bg-blue-950":""),children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("h3",{className:s("text-lg font-semibold",t.text.primary),children:["Version ",a.version_number]}),e.jsxs("div",{className:"flex gap-2",children:[a.is_active&&e.jsx("span",{className:s("inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium","bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100"),children:"âœ“ Active"}),a.status==="archived"&&e.jsxs("span",{className:s("inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium","bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-100"),children:[e.jsx(o,{className:"w-3 h-3"}),"Archived"]})]})]}),a.description&&e.jsx("p",{className:s("text-sm",t.text.secondary),children:a.description}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:s("font-medium",t.text.tertiary),children:"Created"}),e.jsx("p",{className:s("text-xs",t.text.primary),children:new Date(a.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:s("font-medium",t.text.tertiary),children:"Categories"}),e.jsx("p",{className:s("text-xs font-bold","text-blue-600 dark:text-blue-400"),children:a.snapshot.categories.length})]}),e.jsxs("div",{children:[e.jsx("p",{className:s("font-medium",t.text.tertiary),children:"Questions"}),e.jsx("p",{className:s("text-xs font-bold","text-blue-600 dark:text-blue-400"),children:a.snapshot.questions?.length||a.snapshot.question_count||0})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>l(n===a.id?null:a.id),className:s("p-2 rounded-lg transition-colors","hover:bg-gray-200 dark:hover:bg-slate-700"),children:e.jsx(v,{className:"w-5 h-5"})}),n===a.id&&e.jsxs("div",{className:s("absolute right-0 mt-1 w-48 rounded-lg shadow-lg z-10",t.card.base),children:[e.jsxs("button",{onClick:()=>{x(a),l(null)},className:s("w-full text-left px-4 py-2 flex items-center gap-2 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-t-lg",t.text.primary),children:[e.jsx(f,{className:"w-4 h-4"}),"View Details"]}),a.status!=="archived"&&!a.is_active&&e.jsxs("button",{onClick:()=>{l(null)},className:s("w-full text-left px-4 py-2 flex items-center gap-2 hover:bg-gray-100 dark:hover:bg-slate-700",t.text.primary),children:[e.jsx(o,{className:"w-4 h-4"}),"Archive"]})]})]})]}),m?.id===a.id&&e.jsx("div",{className:s("mt-4 pt-4 border-t",t.table.border),children:e.jsx(j,{version:a,showEvaluationCount:!0,showActions:!0,onCompare:()=>{}})})]},a.id))})]})]})})]})}export{z as default};
