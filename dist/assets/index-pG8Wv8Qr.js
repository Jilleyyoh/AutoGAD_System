import{u as C,r as m,j as e,H as _}from"./app-DZrL6wO1.js";import{A as S,a as o,s as p}from"./app-layout-BVNqvqA6.js";import{c as t,t as s}from"./theme-classes-C1o5LvBg.js";import{F as f}from"./file-text-BtWhND71.js";import{C as u}from"./circle-alert-A2Xx533H.js";import{E as k}from"./eye-DK73xOfc.js";import{D as P}from"./download-mUmP9tzt.js";import"./app-CSLFruQT.js";import"./utils-CNSwpjVw.js";import"./button-Cr4sDpjN.js";import"./index-hSTZO9jP.js";import"./index-D4D1kMjY.js";import"./index-CYBwx7kR.js";import"./x-FRcdCJN5.js";import"./createLucideIcon-DkMGSA4v.js";import"./index-BNxELNJL.js";function K({projects:n,pagination:i,interpretations:h=[],max_score:g=20}){const{props:L}=C(),[A,T]=m.useState(null),[d,j]=m.useState(""),[c,N]=m.useState("all"),x=n.filter(a=>{const l=a.project_code.toLowerCase().includes(d.toLowerCase())||a.title.toLowerCase().includes(d.toLowerCase())||a.organization.toLowerCase().includes(d.toLowerCase()),r=c==="all"||c==="certified"&&a.is_certified||c==="pending"&&!a.is_certified;return l&&r}),b=a=>{if(!a)return t("",s.badge.blue);const l=h.find(r=>a>=r.min&&a<=r.max);if(!l)return t("",s.badge.blue);switch(l.interpretation.toLowerCase()){case"gad is invisible in the project.":return t("",s.badge.red);case"gad is kinda visible":return t("",s.badge.yellow);case"partially implemented":return t("",s.badge.blue);case"fully implemented":return t("",s.badge.green);default:return t("",s.badge.blue)}},y=a=>a?h.find(r=>a>=r.min&&a<=r.max)?.interpretation||"Unknown":"Pending",v=n.filter(a=>!a.is_certified).length,w=n.filter(a=>a.is_certified).length;return e.jsxs(S,{children:[e.jsx(_,{title:"Manage Certifications"}),e.jsx("div",{className:"py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:t("text-3xl font-bold flex items-center gap-3",s.text.primary),children:[e.jsx(o,{className:"w-8 h-8 text-blue-600"}),"Manage Certifications"]}),e.jsx("p",{className:t("mt-2",s.text.secondary),children:"Issue certificates for completed evaluation projects"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[e.jsx("div",{className:t("rounded-lg shadow p-6",s.card.base),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:t("text-sm font-medium",s.text.tertiary),children:"Total Projects"}),e.jsx("p",{className:t("text-2xl font-bold",s.text.primary),children:n.length})]}),e.jsx(f,{className:t("w-8 h-8",s.icon.muted)})]})}),e.jsx("div",{className:t("rounded-lg shadow p-6",s.card.base),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:t("text-sm font-medium",s.text.tertiary),children:"Pending Certification"}),e.jsx("p",{className:"text-2xl font-bold text-amber-600 dark:text-amber-400",children:v})]}),e.jsx(u,{className:"w-8 h-8 text-amber-400"})]})}),e.jsx("div",{className:t("rounded-lg shadow p-6",s.card.base),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:t("text-sm font-medium",s.text.tertiary),children:"Certified"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:w})]}),e.jsx(o,{className:"w-8 h-8 text-green-400"})]})})]}),e.jsx("div",{className:t("rounded-lg shadow p-6 mb-6",s.card.base),children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:t("block text-sm font-medium mb-2",s.text.primary),children:"Search Projects"}),e.jsx("input",{type:"text",placeholder:"Search by code, title, or organization...",value:d,onChange:a=>j(a.target.value),className:t("w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",s.input.base)})]}),e.jsxs("div",{children:[e.jsx("label",{className:t("block text-sm font-medium mb-2",s.text.primary),children:"Filter by Status"}),e.jsxs("select",{value:c,onChange:a=>N(a.target.value),className:t("w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",s.input.base),children:[e.jsx("option",{value:"all",children:"All Projects"}),e.jsx("option",{value:"pending",children:"Pending Certification"}),e.jsx("option",{value:"certified",children:"Certified"})]})]})]})}),e.jsx("div",{className:t("rounded-lg shadow overflow-hidden",s.card.base),children:x.length===0?e.jsxs("div",{className:t("p-8 text-center",s.text.tertiary),children:[e.jsx(f,{className:t("mx-auto w-12 h-12 mb-4",s.icon.muted)}),e.jsx("p",{children:"No projects found matching your criteria"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:t("border-b",s.table.header),children:e.jsxs("tr",{children:[e.jsx("th",{className:t("px-6 py-3 text-left text-sm font-medium",s.text.primary),children:"Project Code"}),e.jsx("th",{className:t("px-6 py-3 text-left text-sm font-medium",s.text.primary),children:"Title"}),e.jsx("th",{className:t("px-6 py-3 text-left text-sm font-medium",s.text.primary),children:"Organization"}),e.jsx("th",{className:t("px-6 py-3 text-left text-sm font-medium",s.text.primary),children:"Score"}),e.jsx("th",{className:t("px-6 py-3 text-left text-sm font-medium",s.text.primary),children:"Status"}),e.jsx("th",{className:t("px-6 py-3 text-left text-sm font-medium",s.text.primary),children:"Completion Date"}),e.jsx("th",{className:t("px-6 py-3 text-center text-sm font-medium",s.text.primary),children:"Actions"})]})}),e.jsx("tbody",{className:t("divide-y",s.table.border),children:x.map(a=>e.jsxs("tr",{className:t("transition-colors",s.table.row),children:[e.jsx("td",{className:t("px-6 py-4 text-sm font-medium",s.text.primary),children:e.jsx("span",{className:t("px-3 py-1 rounded-full text-xs font-semibold",s.badge.blue),children:a.project_code})}),e.jsx("td",{className:t("px-6 py-4 text-sm max-w-xs truncate",s.text.primary),children:a.title}),e.jsx("td",{className:t("px-6 py-4 text-sm",s.text.secondary),children:a.organization}),e.jsx("td",{className:t("px-6 py-4 text-sm",s.text.secondary),children:a.average_score?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:b(a.average_score),children:[a.average_score.toFixed(2),"/",g]}),e.jsxs("span",{className:t("text-xs",s.text.tertiary),children:["(",y(a.average_score),")"]})]}):e.jsx("span",{className:t("text-xs",s.text.tertiary),children:"N/A"})}),e.jsx("td",{className:t("px-6 py-4 text-sm",s.text.secondary),children:a.is_certified?e.jsxs("span",{className:"flex items-center gap-1 text-green-600 dark:text-green-400 font-medium",children:[e.jsx(o,{className:"w-4 h-4"}),"Certified"]}):e.jsxs("span",{className:"flex items-center gap-1 text-amber-600 dark:text-amber-400 font-medium",children:[e.jsx(u,{className:"w-4 h-4"}),"Pending"]})}),e.jsx("td",{className:t("px-6 py-4 text-sm",s.text.secondary),children:a.completion_date}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("a",{href:p("admin2.certifications.show",a.id),className:t("transition-colors",s.link.primary),title:"View Details",children:e.jsx(k,{className:"w-5 h-5"})}),a.is_certified&&a.certificate_id&&e.jsx("a",{href:p("admin2.certifications.download",a.certificate_id),className:"text-green-600 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300 transition-colors",title:"Download Certificate",target:"_blank",rel:"noopener noreferrer",children:e.jsx(P,{className:"w-5 h-5"})})]})})]},a.id))})]})})}),i.total>0&&e.jsxs("div",{className:t("mt-4 text-center text-sm",s.text.tertiary),children:["Showing ",x.length," of ",i.total," projects",i.last_page>1&&` (Page ${i.current_page} of ${i.last_page})`]})]})})]})}export{K as default};
