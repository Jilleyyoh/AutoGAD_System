import{u as P,r as v,j as e,H as _,L as f}from"./app-DZrL6wO1.js";import{A as E,s as d}from"./app-layout-BVNqvqA6.js";import{c as s,t as r}from"./theme-classes-C1o5LvBg.js";import{C as T}from"./calendar-BO3DXBkc.js";import{X as R}from"./x-FRcdCJN5.js";import{P as L}from"./plus-D7b07MKU.js";import{E as m}from"./eye-DK73xOfc.js";import{A as N}from"./arrow-right-BJaupKs8.js";import{C as y}from"./clock-uWUX0Jnj.js";import{C as k}from"./circle-check-BkHVpkJp.js";import{C as $}from"./circle-x-BTMzG0jO.js";import"./app-CSLFruQT.js";import"./utils-CNSwpjVw.js";import"./button-Cr4sDpjN.js";import"./index-hSTZO9jP.js";import"./index-D4D1kMjY.js";import"./index-CYBwx7kR.js";import"./createLucideIcon-DkMGSA4v.js";import"./index-BNxELNJL.js";function re(){const{projects:i,filters:j,statusOptions:U}=P().props,[n,C]=v.useState(j.status||"all"),[a,p]=v.useState(j),S=[{key:"all",label:"All"},{key:"for_evaluation",label:"For Evaluation"},{key:"revision",label:"Revision"},{key:"approved",label:"Approved"},{key:"declined",label:"Declined"},{key:"review",label:"In Review"},{key:"for_certification",label:"For Certification"},{key:"certified",label:"Certified"}],l=i.data,D={all:l.length,for_evaluation:l.filter(t=>t.status==="for_evaluation").length,revision:l.filter(t=>t.status==="revision").length,approved:l.filter(t=>t.status==="approved").length,declined:l.filter(t=>t.status==="declined").length,review:l.filter(t=>t.status==="review").length,for_certification:l.filter(t=>t.status==="for_certification").length,certified:l.filter(t=>t.status==="certified").length},w=t=>{switch(t){case"for_evaluation":return{color:"blue",icon:y,bg:"bg-blue-50 dark:bg-blue-900/10",border:"border-blue-200 dark:border-blue-800"};case"revision":return{color:"yellow",icon:m,bg:"bg-yellow-50 dark:bg-yellow-900/10",border:"border-yellow-200 dark:border-yellow-800"};case"approved":return{color:"green",icon:k,bg:"bg-green-50 dark:bg-green-900/10",border:"border-green-200 dark:border-green-800"};case"declined":return{color:"red",icon:$,bg:"bg-red-50 dark:bg-red-900/10",border:"border-red-200 dark:border-red-800"};case"review":return{color:"orange",icon:m,bg:"bg-orange-50 dark:bg-orange-900/10",border:"border-orange-200 dark:border-orange-800"};case"for_certification":return{color:"indigo",icon:y,bg:"bg-indigo-50 dark:bg-indigo-900/10",border:"border-indigo-200 dark:border-indigo-800"};case"certified":return{color:"purple",icon:k,bg:"bg-purple-50 dark:bg-purple-900/10",border:"border-purple-200 dark:border-purple-800"};default:return{color:"gray",icon:m,bg:"bg-gray-50 dark:bg-gray-900/10",border:"border-gray-200 dark:border-gray-800"}}},A=()=>{const t=new URLSearchParams;n!=="all"&&t.set("status",n),a.from&&t.set("from",a.from),a.to&&t.set("to",a.to),window.location.href=d("proponent.pap.submissions")+(t.toString()?"?"+t.toString():"")},u=n==="all"?i.data:i.data.filter(t=>t.status===n);return e.jsxs(E,{breadcrumbs:[{title:"Dashboard",href:d("proponent.dashboard")},{title:"Track Submissions",href:d("proponent.pap.submissions")}],children:[e.jsx(_,{title:"Track Submissions"}),e.jsxs("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8 space-y-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:s("text-4xl font-bold",r.text.primary),children:"Track Submissions"}),e.jsx("p",{className:s("mt-2 max-w-2xl",r.text.secondary),children:"View and manage your project submissions across different stages"})]}),e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:s("rounded-lg border shadow-sm",r.card.base),children:e.jsx("div",{className:"flex flex-wrap justify-center gap-2 p-4 lg:gap-4 lg:p-6",children:S.map(t=>{const{color:o,icon:b,bg:g,border:h}=w(t.key),c=D[t.key],x=n===t.key;return e.jsxs("button",{onClick:()=>C(t.key),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-all duration-200 ${x?`${g} ${h} border-2 text-${o}-700 dark:text-${o}-300 shadow-md`:s("text-gray-600 hover:text-gray-900 border border-transparent",r.text.secondary,"dark:hover:text-gray-300")}`,children:[e.jsx(b,{className:"w-4 h-4"}),e.jsx("span",{children:t.label}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold ${x?`${o==="blue"?"bg-blue-200 dark:bg-blue-800 text-blue-800 dark:text-blue-200":o==="purple"?"bg-purple-200 dark:bg-purple-800 text-purple-800 dark:text-purple-200":o==="green"?"bg-green-200 dark:bg-green-800 text-green-800 dark:text-green-200":o==="red"?"bg-red-200 dark:bg-red-800 text-red-800 dark:text-red-200":"bg-gray-200 dark:bg-gray-800 text-gray-800 dark:text-gray-200"}`:s("bg-gray-100 text-gray-600","dark:bg-slate-700 dark:text-gray-400")}`,children:c})]},t.key)})})})}),e.jsxs("div",{className:s("p-6 shadow-sm rounded-lg border",r.card.base),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:s("w-5 h-5",r.icon.primary)}),e.jsx("h2",{className:s("text-lg font-semibold",r.text.primary),children:"Refine by Date (Optional)"})]}),(a.from||a.to)&&e.jsxs("button",{onClick:()=>{p({...a,from:void 0,to:void 0});const t=new URLSearchParams;n!=="all"&&t.set("status",n),window.location.href=d("proponent.pap.submissions")+(t.toString()?"?"+t.toString():"")},className:s("text-sm px-3 py-1 rounded-md",r.button.secondary),children:[e.jsx(R,{className:"w-4 h-4 inline mr-1"}),"Clear Dates"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:s("block text-sm font-medium mb-2",r.text.primary),children:"Start Date"}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"date",value:a.from||"",onChange:t=>p({...a,from:t.target.value||void 0}),className:s("block w-full px-4 py-2 rounded-lg border text-sm appearance-none cursor-pointer",r.input.base,r.input.focus),style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'%3E%3Crect x='3' y='4' width='18' height='18' rx='2'/%3E%3Cpath d='M16 2v4M8 2v4M3 10h18'/%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 0.5rem center",backgroundSize:"1.25rem",paddingRight:"2.5rem"}})}),a.from&&e.jsx("p",{className:s("text-xs mt-1",r.text.tertiary),children:new Date(a.from).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:s("block text-sm font-medium mb-2",r.text.primary),children:"End Date"}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"date",value:a.to||"",onChange:t=>p({...a,to:t.target.value||void 0}),className:s("block w-full px-4 py-2 rounded-lg border text-sm appearance-none cursor-pointer",r.input.base,r.input.focus),style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'%3E%3Crect x='3' y='4' width='18' height='18' rx='2'/%3E%3Cpath d='M16 2v4M8 2v4M3 10h18'/%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 0.5rem center",backgroundSize:"1.25rem",paddingRight:"2.5rem"}})}),a.to&&e.jsx("p",{className:s("text-xs mt-1",r.text.tertiary),children:new Date(a.to).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"})})]}),e.jsx("div",{className:"md:col-span-1 lg:col-span-1 flex items-end",children:a.from&&a.to?e.jsxs("div",{className:s("w-full px-4 py-2 rounded-lg text-sm font-medium text-center",r.badge.blue),children:[Math.ceil((new Date(a.to).getTime()-new Date(a.from).getTime())/(1e3*60*60*24))+1," days"]}):a.from||a.to?e.jsx("div",{className:s("w-full px-4 py-2 rounded-lg text-sm font-medium text-center",r.badge.yellow),children:"Select both dates"}):e.jsx("div",{className:s("w-full px-4 py-2 rounded-lg text-sm text-center",r.text.tertiary),children:"Date range optional"})}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{type:"button",onClick:A,className:s("w-full px-4 py-2 text-sm font-medium rounded-lg shadow-sm transition-all",r.button.primary),children:"Apply Filters"})})]}),(a.from||a.to)&&e.jsxs("div",{className:s("mt-4 px-4 py-3 rounded-md text-sm",r.alert.info),children:[e.jsx("span",{className:s("font-medium",r.text.primary),children:"Filtering by: "}),e.jsxs("span",{className:r.text.secondary,children:[a.from&&`from ${new Date(a.from).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})}`,a.from&&a.to&&" to ",a.to&&`${new Date(a.to).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})}`]})]})]}),e.jsxs("div",{className:s("shadow-md rounded-lg overflow-hidden border",r.card.base),children:[e.jsxs("div",{className:s("px-6 py-5 border-b flex items-center justify-between",r.border.primary),children:[e.jsxs("div",{children:[e.jsx("h2",{className:s("text-lg font-semibold",r.text.primary),children:"Your Submissions"}),e.jsxs("p",{className:s("text-sm mt-1",r.text.tertiary),children:["Total: ",u.length," of ",i.total," submissions"]})]}),e.jsxs(f,{href:d("proponent.pap.create"),className:s("inline-flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium shadow-sm transition-all",r.button.primary),children:[e.jsx(L,{className:"w-4 h-4"}),"Create New PAP"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:s("min-w-full divide-y",r.table.border),children:[e.jsx("thead",{className:r.table.header,children:e.jsxs("tr",{children:[e.jsx("th",{className:s("px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",r.text.secondary),children:"Code"}),e.jsx("th",{className:s("px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",r.text.secondary),children:"Title"}),e.jsx("th",{className:s("px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",r.text.secondary),children:"Domain"}),e.jsx("th",{className:s("px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",r.text.secondary),children:"Submitted"}),e.jsx("th",{className:s("px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",r.text.secondary),children:"Status"}),e.jsx("th",{className:s("px-6 py-3 text-center text-xs font-medium uppercase tracking-wider",r.text.secondary),children:"Action"})]})}),e.jsxs("tbody",{className:s("divide-y",r.table.border),children:[u.map(t=>{const{color:o,icon:b,bg:g,border:h}=w(t.status);return e.jsxs("tr",{className:r.table.row,children:[e.jsx("td",{className:s("px-6 py-4 text-sm font-mono font-semibold",r.text.primary),children:t.project_code}),e.jsx("td",{className:s("px-6 py-4 text-sm max-w-xs",r.text.primary),children:e.jsx("span",{title:t.title,className:"truncate",children:t.title})}),e.jsx("td",{className:s("px-6 py-4 text-sm",r.text.secondary),children:t.domain||"â€”"}),e.jsx("td",{className:s("px-6 py-4 text-sm whitespace-nowrap",r.text.secondary),children:new Date(t.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:s("inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold",g,h,"border"),children:[e.jsx(b,{className:"w-3 h-3"}),t.status.split("_").map((c,x)=>c.charAt(0).toUpperCase()+c.slice(1)).join(" ")]})}),e.jsx("td",{className:"px-6 py-4 text-center",children:t.status==="revision"?e.jsxs(f,{href:d("proponent.pap.submissions.show",t.id),className:s("inline-flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-all",r.button.primary),children:[e.jsx(m,{className:"w-4 h-4"}),"Revise",e.jsx(N,{className:"w-3 h-3"})]}):e.jsxs(f,{href:d("proponent.pap.submissions.show",t.id),className:s("inline-flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-all",r.button.secondary),children:[e.jsx(m,{className:"w-4 h-4"}),"View",e.jsx(N,{className:"w-3 h-3"})]})})]},t.id)}),u.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:s("px-6 py-12 text-center",r.text.secondary),children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(y,{className:s("w-8 h-8",r.icon.muted)}),e.jsx("p",{className:"font-medium",children:"No submissions found"}),e.jsx("p",{className:"text-xs",children:"Try adjusting your filters or create a new PAP"})]})})})]})]})}),e.jsxs("div",{className:s("px-6 py-4 border-t flex items-center justify-between",r.border.primary),children:[e.jsxs("div",{className:s("text-sm",r.text.secondary),children:["Page ",e.jsx("span",{className:s("font-semibold",r.text.primary),children:i.current_page})," of ",e.jsx("span",{className:s("font-semibold",r.text.primary),children:i.last_page}),e.jsxs("span",{className:s("ml-2",r.text.tertiary),children:["(",i.total," total)"]})]}),e.jsx("div",{className:"flex items-center gap-2",children:i.links.filter(t=>t.label!=="&laquo; Previous"&&t.label!=="Next &raquo;").map((t,o)=>e.jsx("button",{disabled:!t.url,onClick:()=>t.url&&(window.location.href=t.url),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-all ${t.active?s("text-white shadow-md","bg-blue-600 dark:bg-blue-700 hover:bg-blue-700 dark:hover:bg-blue-800"):s("border",r.button.secondary)} ${t.url?"cursor-pointer":"opacity-50 cursor-not-allowed"}`,children:t.label},o))})]})]})]})]})}export{re as default};
